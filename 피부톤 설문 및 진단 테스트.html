<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>피부유형 자가진단 테스트</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Arial', 'Malgun Gothic', sans-serif;
    }
    
    body {
      background-color: #f9f9f9;
      line-height: 1.6;
      color: #333;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .header-logo {
      font-size: 28px;
      margin-right: 15px;
      color: #3f51b5;
    }
    
    .header-title {
      font-size: 24px;
      font-weight: bold;
    }
    
    h1, h2, h3 {
      margin-bottom: 15px;
      color: #333;
    }
    
    .card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .survey-container {
      margin-bottom: 30px;
    }
    
    .question {
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    
    .option {
      display: flex;
      align-items: center;
    }
    
    .option label {
      margin-left: 5px;
      cursor: pointer;
    }
    
    button {
      background-color: #3f51b5;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-right: 10px;
    }
    
    .reset-btn {
      background-color: #f44336;
    }
    
    button:hover {
      opacity: 0.9;
    }
    
    .result-container {
      display: none;
    }
    
    .result-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .result-logo {
      font-size: 28px;
      margin-right: 15px;
      color: #3f51b5;
    }
    
    .beauty-code {
      margin: 10px 0;
    }
    
    .beauty-code h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }
    
    .code-display {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #3f51b5;
    }
    
    .skin-type {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .section {
      margin-bottom: 20px;
    }
    
    .section-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #3f51b5;
      display: flex;
      align-items: center;
    }
    
    .section-title span {
      margin-right: 8px;
    }
    
    .table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    
    .table th, .table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    
    .table th {
      background-color: #f2f2f2;
    }
    
    .feature-list, .routine-list, .product-list {
      list-style: none;
      padding-left: 0;
    }
    
    .feature-item, .product-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    
    .feature-icon, .product-icon {
      margin-right: 10px;
      min-width: 20px;
    }
    
    .routine-box {
      background-color: #e8f5e9;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 15px;
    }
    
    .routine-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #2e7d32;
    }
    
    .routine-list li {
      margin-bottom: 8px;
      margin-left: 20px;
    }
    
    .tip-box {
      background-color: #fff8e1;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .action-buttons {
      margin-top: 20px;
      display: flex;
    }
    
    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .header-logo {
        margin-bottom: 10px;
      }
      
      .options {
        flex-direction: column;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      button {
        margin-bottom: 10px;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-logo">💎</div>
      <div class="header-title">피부유형 자가진단 테스트</div>
    </div>
    
    <div class="survey-container card" id="survey-container">
      <h2>피부 설문지</h2>
      
      <div class="question">
        <h3>1. 성별</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="gender-female" name="gender" value="female" required>
            <label for="gender-female">여성</label>
          </div>
          <div class="option">
            <input type="radio" id="gender-male" name="gender" value="male">
            <label for="gender-male">남성</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>2. 연령대</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="age-10s" name="age" value="10s" required>
            <label for="age-10s">10대</label>
          </div>
          <div class="option">
            <input type="radio" id="age-20s" name="age" value="20s">
            <label for="age-20s">20대</label>
          </div>
          <div class="option">
            <input type="radio" id="age-30s" name="age" value="30s">
            <label for="age-30s">30대</label>
          </div>
          <div class="option">
            <input type="radio" id="age-40s" name="age" value="40s">
            <label for="age-40s">40대</label>
          </div>
          <div class="option">
            <input type="radio" id="age-50s" name="age" value="50s">
            <label for="age-50s">50대</label>
          </div>
          <div class="option">
            <input type="radio" id="age-60s" name="age" value="60s">
            <label for="age-60s">60대 이상</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>3. 수분 섭취량</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="hydration-1" name="hydration" value="1" required>
            <label for="hydration-1">매우 부족</label>
          </div>
          <div class="option">
            <input type="radio" id="hydration-2" name="hydration" value="2">
            <label for="hydration-2">부족</label>
          </div>
          <div class="option">
            <input type="radio" id="hydration-3" name="hydration" value="3">
            <label for="hydration-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="hydration-4" name="hydration" value="4">
            <label for="hydration-4">충분</label>
          </div>
          <div class="option">
            <input type="radio" id="hydration-5" name="hydration" value="5">
            <label for="hydration-5">매우 충분</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>4. 세안 후 당김</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="tightness-1" name="tightness" value="1" required>
            <label for="tightness-1">전혀 없음</label>
          </div>
          <div class="option">
            <input type="radio" id="tightness-2" name="tightness" value="2">
            <label for="tightness-2">약간 있음</label>
          </div>
          <div class="option">
            <input type="radio" id="tightness-3" name="tightness" value="3">
            <label for="tightness-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="tightness-4" name="tightness" value="4">
            <label for="tightness-4">자주 느껴짐</label>
          </div>
          <div class="option">
            <input type="radio" id="tightness-5" name="tightness" value="5">
            <label for="tightness-5">항상 당김</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>5. 트러블 빈도</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="trouble-1" name="trouble" value="1" required>
            <label for="trouble-1">없음</label>
          </div>
          <div class="option">
            <input type="radio" id="trouble-2" name="trouble" value="2">
            <label for="trouble-2">가끔</label>
          </div>
          <div class="option">
            <input type="radio" id="trouble-3" name="trouble" value="3">
            <label for="trouble-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="trouble-4" name="trouble" value="4">
            <label for="trouble-4">자주</label>
          </div>
          <div class="option">
            <input type="radio" id="trouble-5" name="trouble" value="5">
            <label for="trouble-5">항상 있음</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>6. 피부 민감도</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="sensitivity-1" name="sensitivity" value="1" required>
            <label for="sensitivity-1">매우 둔감</label>
          </div>
          <div class="option">
            <input type="radio" id="sensitivity-2" name="sensitivity" value="2">
            <label for="sensitivity-2">약간 둔감</label>
          </div>
          <div class="option">
            <input type="radio" id="sensitivity-3" name="sensitivity" value="3">
            <label for="sensitivity-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="sensitivity-4" name="sensitivity" value="4">
            <label for="sensitivity-4">민감</label>
          </div>
          <div class="option">
            <input type="radio" id="sensitivity-5" name="sensitivity" value="5">
            <label for="sensitivity-5">매우 민감</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>7. 피지 분비량</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="sebum-1" name="sebum" value="1" required>
            <label for="sebum-1">매우 적음</label>
          </div>
          <div class="option">
            <input type="radio" id="sebum-2" name="sebum" value="2">
            <label for="sebum-2">적음</label>
          </div>
          <div class="option">
            <input type="radio" id="sebum-3" name="sebum" value="3">
            <label for="sebum-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="sebum-4" name="sebum" value="4">
            <label for="sebum-4">많음</label>
          </div>
          <div class="option">
            <input type="radio" id="sebum-5" name="sebum" value="5">
            <label for="sebum-5">매우 많음</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>8. T존/U존 특성</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="zone-1" name="zone" value="1" required>
            <label for="zone-1">전체 건성</label>
          </div>
          <div class="option">
            <input type="radio" id="zone-2" name="zone" value="2">
            <label for="zone-2">T존만 지성</label>
          </div>
          <div class="option">
            <input type="radio" id="zone-3" name="zone" value="3">
            <label for="zone-3">U존만 지성</label>
          </div>
          <div class="option">
            <input type="radio" id="zone-4" name="zone" value="4">
            <label for="zone-4">전체 지성</label>
          </div>
          <div class="option">
            <input type="radio" id="zone-5" name="zone" value="5">
            <label for="zone-5">혼합성</label>
          </div>
        </div>
      </div>
      
      <div class="question">
        <h3>9. 피부 혈색/톤</h3>
        <div class="options">
          <div class="option">
            <input type="radio" id="tone-1" name="tone" value="1" required>
            <label for="tone-1">매우 밝음</label>
          </div>
          <div class="option">
            <input type="radio" id="tone-2" name="tone" value="2">
            <label for="tone-2">밝음</label>
          </div>
          <div class="option">
            <input type="radio" id="tone-3" name="tone" value="3">
            <label for="tone-3">보통</label>
          </div>
          <div class="option">
            <input type="radio" id="tone-4" name="tone" value="4">
            <label for="tone-4">어두움</label>
          </div>
          <div class="option">
            <input type="radio" id="tone-5" name="tone" value="5">
            <label for="tone-5">매우 어두움</label>
          </div>
        </div>
      </div>
      
      <div class="action-buttons">
        <button type="button" id="result-btn">결과 확인</button>
      </div>
    </div>
    
    <div class="result-container card" id="result-container">
      <div class="result-header">
        <div class="result-logo">💎</div>
        <div class="header-title">피부유형 자가진단 테스트</div>
      </div>
      
      <div class="beauty-code">
        <h2>당신의 BEAUTY CODE</h2>
        <div class="code-display" id="beauty-code">OSTT</div>
        <div class="skin-type" id="skin-type-name">커스텀 피부 코드 (당신만의 고유 피부유형)</div>
      </div>
      
      <div class="section">
        <div class="section-title"><span>📊</span> 피부 유형 설명</div>
        <p id="skin-description">피부 유형 설명이 여기에 표시됩니다.</p>
      </div>
      
      <div class="section">
        <div class="section-title"><span>🔍</span> 상세 피부 분석</div>
        <table class="table">
          <tr>
            <th>항목</th>
            <th>분석 결과</th>
          </tr>
          <tr>
            <td>수분 상태</td>
            <td id="hydration-result"></td>
          </tr>
          <tr>
            <td>민감도</td>
            <td id="sensitivity-result"></td>
          </tr>
          <tr>
            <td>트러블 빈도</td>
            <td id="trouble-result"></td>
          </tr>
          <tr>
            <td>피부 톤/혈색</td>
            <td id="tone-result"></td>
          </tr>
        </table>
      </div>
      
      <div class="section">
        <div class="section-title"><span>✅</span> 주요 특징</div>
        <ul class="feature-list" id="feature-list">
          <!-- 특징 항목들이 여기에 동적으로 추가됩니다 -->
        </ul>
      </div>
      
      <div class="section">
        <div class="section-title"><span>📋</span> 맞춤형 스킨케어 루틴</div>
        
        <div class="routine-box">
          <div class="routine-title">AM 루틴</div>
          <ol class="routine-list" id="am-routine">
            <!-- AM 루틴 항목들이 여기에 동적으로 추가됩니다 -->
          </ol>
        </div>
        
        <div class="routine-box">
          <div class="routine-title">PM 루틴</div>
          <ol class="routine-list" id="pm-routine">
            <!-- PM 루틴 항목들이 여기에 동적으로 추가됩니다 -->
          </ol>
        </div>
      </div>
      
      <div class="section">
        <div class="section-title"><span>🔒</span> 추천 제품</div>
        <ul class="product-list" id="product-list">
          <!-- 제품 추천 목록이 여기에 동적으로 추가됩니다 -->
        </ul>
      </div>
      
      <div class="tip-box">
        <p><strong>TIP:</strong> 제품 테스트 전, 팔 안쪽에 먼저 발라보고 24시간 후 이상 반응 없을 시 사용하세요. 민감 피부는 새로운 제품 도입 시 패치 테스트가 매우 중요합니다.</p>
      </div>
      
      <div class="section">
        <div class="section-title"><span>📝</span> 설문 응답 요약</div>
        <table class="table">
          <tr>
            <th>질문</th>
            <th>답변</th>
          </tr>
          <tr>
            <td>성별</td>
            <td id="response-gender">-</td>
          </tr>
          <tr>
            <td>연령대</td>
            <td id="response-age">-</td>
          </tr>
          <tr>
            <td>수분 섭취량</td>
            <td id="response-hydration">-</td>
          </tr>
          <tr>
            <td>세안 후 당김</td>
            <td id="response-tightness">-</td>
          </tr>
          <tr>
            <td>트러블 빈도</td>
            <td id="response-trouble">-</td>
          </tr>
          <tr>
            <td>피부 민감도</td>
            <td id="response-sensitivity">-</td>
          </tr>
          <tr>
            <td>피지 분비량</td>
            <td id="response-sebum">-</td>
          </tr>
          <tr>
            <td>T존/U존 특성</td>
            <td id="response-zone">-</td>
          </tr>
          <tr>
            <td>피부 혈색</td>
            <td id="response-tone">-</td>
          </tr>
        </table>
      </div>
      
      <div class="action-buttons">
        <button type="button" id="reset-btn" class="reset-btn">다시 진단하기</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 요소 참조
      const resultBtn = document.getElementById('result-btn');
      const resetBtn = document.getElementById('reset-btn');
      const surveyContainer = document.getElementById('survey-container');
      const resultContainer = document.getElementById('result-container');
      
      // 피부 타입 데이터
      const skinTypes = {
        'OSTT': {
          name: '오일리 센서티브 트러블 타입',
          description: '피지 분비가 많으면서도 외부 자극에 민감한 피부입니다. 트러블이 자주 발생하고 피부 톤은 투명한 편입니다. 피지 조절과 함께 자극 없는 제품으로 진정 케어가 필요합니다. 과도한 세안은 오히려 유분 분비를 촉진할 수 있습니다.',
          features: [
            '번들거림과 트러블이 동시에 발생',
            '자극적인 성분에 민감하게 반응',
            '진정과 유분 조절 동시 케어 필요'
          ],
          products: [
            '저자극 약산성 클렌저',
            '판테놀 또는 진정 성분 함유 토너',
            '비오일 포뮬러 수분 에센스',
            '가벼운 텍스처의 진정 젤 크림'
          ],
          amRoutine: [
            '젤 타입 클렌저로 가볍게 세안',
            '피지 조절 토너 사용',
            '유분없는 수분 에센스 사용',
            '오일프리 수분 크림 사용',
            '매트한 마무리의 선크림 사용'
          ],
          pmRoutine: [
            '오일 클렌저 사용 (더블 클렌징)',
            '각질 정돈을 위한 저자극 BHA 토너 (주 2-3회)',
            '피지 조절 세럼 사용',
            '가벼운 젤 타입 크림 사용',
            '진정 마스크팩 주 2회 사용'
          ],
          analysis: {
            hydration: '유분기가 많고 번들거림',
            sensitivity: '외부 자극에 민감하게 반응함',
            trouble: '트러블이 자주 발생하는 편',
            tone: '피부 톤이 투명한 편'
          }
        },
        'DSCT': {
          name: '드라이 센서티브 클리어 타입',
          description: '건조하고 민감한 피부로, 외부 자극에 예민하게 반응합니다. 트러블은 적은 편이나 건조함으로 인한 불편함이 있습니다. 피부 장벽이 약해 외부 자극에 민감하고 수분 유지가 어려운 타입입니다. 보습과 진정에 중점을 둔 관리가 필요합니다.',
          features: [
            '건조함과 당김이 심함',
            '자극에 민감하게 반응',
            '저자극, 고보습 제품 사용 필요'
          ],
          products: [
            '크림 타입 저자극 클렌저',
            '세라마이드 함유 고보습 토너',
            '판테놀 진정 에센스',
            '오일 함유 보습 크림'
          ],
          amRoutine: [
            '미온수로 가볍게 세안 혹은 토너 세안',
            '보습 토너로 수분 공급',
            '보습 에센스 사용',
            '고보습 크림으로 수분 잠금',
            '자외선 차단제 사용'
          ],
          pmRoutine: [
            '크림 타입 클렌저로 부드럽게 세안',
            '보습 토너 듬뿍 사용',
            '영양 세럼 사용',
            '오일 혼합 크림으로 보습 강화',
            '오버나이트 마스크 주 2-3회 사용'
          ],
          analysis: {
            hydration: '건조한 편으로 수분 공급이 필요함',
            sensitivity: '자극에 민감하게 반응하는 편',
            trouble: '트러블이 거의 없는 편',
            tone: '피부 톤이 밝고 투명한 편'
          }
        },
        'BSCT': {
          name: '밸런스 센서티브 클리어 타입',
          description: '수분과 유분이 균형을 이루며, 외부 자극에 민감하게 반응하는 피부입니다. 트러블은 적은 편이고 피부 톤이 맑은 편입니다. 환경 변화에 민감하게 반응하는 피부로, 붉어짐, 자극, 따가움이 자주 발생합니다. 피부 장벽이 약화될 수 있으므로 진정과 보습 중심의 관리가 필요합니다.',
          features: [
            '붉어짐과 자극에 민감하게 반응함',
            '유수분 밸런스가 불안정함',
            '민감성 전용 제품 사용 권장'
          ],
          products: [
            '무향 약산성 진정 토너',
            '저자극 세라마이드 앰플',
            '민감성 전용 수분크림 및 선크림'
          ],
          amRoutine: [
            '미온수로 가볍게 세안',
            '저자극 토너로 피부결 정돈',
            '보습 세럼 사용',
            '보습 크림으로 피부 보호',
            'SPF 30 이상 자외선 차단제 사용'
          ],
          pmRoutine: [
            '저자극 클렌저로 세안',
            '진정 토너 사용',
            '세라마이드 함유 앰플 사용',
            '회복을 위한 수면팩 1-2회/주 사용',
            '충분한 수면으로 피부 회복 돕기'
          ],
          analysis: {
            hydration: '적절한 수분 밸런스 유지',
            sensitivity: '자극에 민감하게 반응하는 편',
            trouble: '트러블이 거의 없는 깨끗한 피부',
            tone: '피부 톤이 밝고 투명한 편'
          }
        }
      };
      
      // 응답 매핑
      const responseMap = {
        gender: { 'female': '여성', 'male': '남성' },
        age: { '10s': '10대', '20s': '20대', '30s': '30대', '40s': '40대', '50s': '50대', '60s': '60대 이상' },
        hydration: { '1': '매우 부족', '2': '부족', '3': '보통', '4': '충분', '5': '매우 충분' },
        tightness: { '1': '전혀 없음', '2': '약간 있음', '3': '보통', '4': '자주 느껴짐', '5': '항상 당김' },
        trouble: { '1': '없음', '2': '가끔', '3': '보통', '4': '자주', '5': '항상 있음' },
        sensitivity: { '1': '매우 둔감', '2': '약간 둔감', '3': '보통', '4': '민감', '5': '매우 민감' },
        sebum: { '1': '매우 적음', '2': '적음', '3': '보통', '4': '많음', '5': '매우 많음' },
        zone: { '1': '전체 건성', '2': 'T존만 지성', '3': 'U존만 지성', '4': '전체 지성', '5': '혼합성' },
        tone: { '1': '매우 밝음', '2': '밝음', '3': '보통', '4': '어두움', '5': '매우 어두움' }
      };
      
      // 기본 피부 타입 생성 함수
      function generateBasicSkinType(m, s, t, tone) {
        return {
          name: `${m === 'D' ? '건조' : m === 'B' ? '균형' : '지성'} ${s === 'R' ? '내성' : '민감'} ${t === 'C' ? '클리어' : '트러블'} ${tone === 'M' ? '무광' : '광채'} 타입`,
          description: `${m === 'D' ? '건조하고' : m === 'B' ? '균형 잡히고' : '지성이고'} ${s === 'R' ? '민감하지 않으며' : '민감하며'}, 트러블이 ${t === 'C' ? '적고' : '많고'} 피부 톤이 ${tone === 'M' ? '탁한' : '맑은'} 편의 피부입니다. ${m === 'D' ? '보습' : m === 'B' ? '균형 유지' : '유분 조절'}과 ${s === 'S' ? '진정' : '활력'} 케어가 중요합니다. ${t === 'T' ? '트러블 관리에 신경써야 합니다.' : ''}`,
          features: [
            `${m === 'D' ? '건조함 개선 필요' : m === 'B' ? '균형 잡힌 유수분 관리' : '과도한 유분 조절 필요'}`,
            `${s === 'S' ? '자극에 민감하게 반응' : '외부 자극에 강한 피부'}`,
            `${t === 'T' ? '트러블 관리 필요' : '깨끗한 피부 유지'}`
          ],
          products: [
            `${m === 'D' ? '고보습 토너' : m === 'B' ? '밸런싱 토너' : '피지 조절 토너'}`,
            `${s === 'S' ? '진정 에센스' : '활력 에센스'}`,
            `${t === 'T' ? '트러블 케어 세럼' : '영양 공급 세럼'}`
          ],
          amRoutine: [
            `${m === 'D' ? '부드러운 크림 타입 클렌저로 세안' : m === 'B' ? '젤 타입 클렌저로 세안' : '포밍 클렌저로 세안'}`,
            `${s === 'S' ? '저자극 토너 사용' : '밸런싱 토너 사용'}`,
            `수분 에센스 사용`,
            `${m === 'D' ? '보습 크림 사용' : m === 'B' ? '밸런싱 크림 사용' : '오일프리 수분 크림 사용'}`,
            `자외선 차단제 사용`
          ],
          pmRoutine: [
            `${m === 'D' ? '오일 클렌저로 메이크업 제거' : '더블 클렌징으로 메이크업 제거'}`,
            `${s === 'S' ? '저자극 토너 사용' : '피부결 정돈 토너 사용'}`,
            `${t === 'T' ? '트러블 케어 세럼 사용' : '영양 세럼 사용'}`,
            `${m === 'D' ? '영양 크림 사용' : m === 'B' ? '밸런싱 크림 사용' : '가벼운 수분 크림 사용'}`,
            `주 2-3회 ${m === 'D' ? '보습' : t === 'T' ? '진정' : '영양'} 마스크팩 사용`
          ],
          analysis: {
            hydration: m === 'D' ? '건조한 편으로 수분 공급이 필요함' : m === 'B' ? '적절한 수분 밸런스 유지' : '유분기가 많은 편',
            sensitivity: s === 'R' ? '외부 자극에 강한 편' : '자극에 민감하게 반응하는 편',
            trouble: t === 'C' ? '트러블이 거의 없는 깨끗한 피부' : '트러블이 자주 발생하는 편',
            tone: tone === 'M' ? '피부 톤이 다소 탁하거나 균일하지 않음' : '피부 톤이 밝고 투명한 편'
          }
        };
      }
      
      // 모든 가능한 피부 타입 생성
      function generateAllSkinTypes() {
        const moistureTypes = ['D', 'B', 'O']; // Dry, Balanced, Oily
        const sensitivityTypes = ['R', 'S']; // Resistant, Sensitive
        const troubleTypes = ['C', 'T']; // Clear, Trouble
        const toneTypes = ['M', 'T']; // Matte, Translucent
        
        moistureTypes.forEach(m => {
          sensitivityTypes.forEach(s => {
            troubleTypes.forEach(t => {
              toneTypes.forEach(tone => {
                const code = m + s + t + tone;
                if (!skinTypes[code]) {
                  skinTypes[code] = generateBasicSkinType(m, s, t, tone);
                }
              });
            });
          });
        });
      }
      
      // 모든 가능한 피부 타입 생성
      generateAllSkinTypes();
      
      // 결과 표시 함수
      function showResult(code) {
        const skinType = skinTypes[code] || generateBasicSkinType(code[0], code[1], code[2], code[3]);
        
        // 뷰티 코드 표시
        document.getElementById('beauty-code').textContent = code;
        document.getElementById('skin-type-name').textContent = skinType.name;
        document.getElementById('skin-description').textContent = skinType.description;
        
        // 분석 결과 표시
        document.getElementById('hydration-result').textContent = skinType.analysis.hydration;
        document.getElementById('sensitivity-result').textContent = skinType.analysis.sensitivity;
        document.getElementById('trouble-result').textContent = skinType.analysis.trouble;
        document.getElementById('tone-result').textContent = skinType.analysis.tone;
        
        // 특징 목록 표시
        const featureList = document.getElementById('feature-list');
        featureList.innerHTML = '';
        skinType.features.forEach(feature => {
          const li = document.createElement('li');
          li.className = 'feature-item';
          li.innerHTML = `<span class="feature-icon">✓</span> ${feature}`;
          featureList.appendChild(li);
        });
        
        // AM 루틴 표시
        const amRoutine = document.getElementById('am-routine');
        amRoutine.innerHTML = '';
        skinType.amRoutine.forEach(step => {
          const li = document.createElement('li');
          li.textContent = step;
          amRoutine.appendChild(li);
        });
        
        // PM 루틴 표시
        const pmRoutine = document.getElementById('pm-routine');
        pmRoutine.innerHTML = '';
        skinType.pmRoutine.forEach(step => {
          const li = document.createElement('li');
          li.textContent = step;
          pmRoutine.appendChild(li);
        });
        
        // 제품 추천 표시
        const productList = document.getElementById('product-list');
        productList.innerHTML = '';
        skinType.products.forEach(product => {
          const li = document.createElement('li');
          li.className = 'product-item';
          li.innerHTML = `<span class="product-icon">🔸</span> ${product}`;
          productList.appendChild(li);
        });
        
        // 설문 응답 표시
        document.getElementById('response-gender').textContent = getSelectedValue('gender', responseMap.gender);
        document.getElementById('response-age').textContent = getSelectedValue('age', responseMap.age);
        document.getElementById('response-hydration').textContent = getSelectedValue('hydration', responseMap.hydration);
        document.getElementById('response-tightness').textContent = getSelectedValue('tightness', responseMap.tightness);
        document.getElementById('response-trouble').textContent = getSelectedValue('trouble', responseMap.trouble);
        document.getElementById('response-sensitivity').textContent = getSelectedValue('sensitivity', responseMap.sensitivity);
        document.getElementById('response-sebum').textContent = getSelectedValue('sebum', responseMap.sebum);
        document.getElementById('response-zone').textContent = getSelectedValue('zone', responseMap.zone);
        document.getElementById('response-tone').textContent = getSelectedValue('tone', responseMap.tone);
        
        // 설문 숨기고 결과 표시
        surveyContainer.style.display = 'none';
        resultContainer.style.display = 'block';
        
        // URL에 코드 추가
        const url = new URL(window.location);
        url.searchParams.set('code', code);
        window.history.replaceState({}, '', url);
      }
      
      // 선택한 값 가져오기
      function getSelectedValue(name, mapping) {
        const selected = document.querySelector(`input[name="${name}"]:checked`);
        return selected ? mapping[selected.value] : '-';
      }
      
      // 피부 코드 생성 함수
      function generateSkinCode() {
        // 모든 필수 입력 확인
        const requiredInputs = ['gender', 'age', 'hydration', 'tightness', 'trouble', 'sensitivity', 'sebum', 'zone', 'tone'];
        for (const input of requiredInputs) {
          if (!document.querySelector(`input[name="${input}"]:checked`)) {
            alert(`모든 질문에 답변해주세요.`);
            return null;
          }
        }
        
        // 폼 데이터 수집
        const hydrationValue = parseInt(document.querySelector('input[name="hydration"]:checked').value);
        const tightnessValue = parseInt(document.querySelector('input[name="tightness"]:checked').value);
        const troubleValue = parseInt(document.querySelector('input[name="trouble"]:checked').value);
        const sensitivityValue = parseInt(document.querySelector('input[name="sensitivity"]:checked').value);
        const sebumValue = parseInt(document.querySelector('input[name="sebum"]:checked').value);
        const zoneValue = parseInt(document.querySelector('input[name="zone"]:checked').value);
        const toneValue = parseInt(document.querySelector('input[name="tone"]:checked').value);
        
        // 수분 점수 계산
        const moistureScore = (hydrationValue + (6 - tightnessValue) + (6 - sebumValue) + (6 - zoneValue)) / 4;
        
        // 뷰티 코드 생성
        let code = '';
        
        // 첫 번째 자리: 수분 상태
        if (moistureScore <= 2.5) {
          code += 'D'; // Dry
        } else if (moistureScore <= 3.5) {
          code += 'B'; // Balanced
        } else {
          code += 'O'; // Oily
        }
        
        // 두 번째 자리: 민감도
        if (sensitivityValue <= 2.5) {
          code += 'R'; // Resistant
        } else {
          code += 'S'; // Sensitive
        }
        
        // 세 번째 자리: 트러블 빈도
        if (troubleValue <= 2.5) {
          code += 'C'; // Clear
        } else {
          code += 'T'; // Trouble
        }
        
        // 네 번째 자리: 피부 톤/혈색
        if (toneValue <= 2.5) {
          code += 'M'; // Matte
        } else {
          code += 'T'; // Translucent
        }
        
        return code;
      }
      
      // "결과 확인" 버튼 클릭 이벤트
      resultBtn.addEventListener('click', function() {
        const skinCode = generateSkinCode();
        if (skinCode) {
          showResult(skinCode);
        }
      });
      
      // "다시 진단하기" 버튼 클릭 이벤트
      resetBtn.addEventListener('click', function() {
        // 모든 라디오 버튼 선택 해제
        document.querySelectorAll('input[type="radio"]').forEach(input => {
          input.checked = false;
        });
        
        // 결과 숨기고 설문 표시
        resultContainer.style.display = 'none';
        surveyContainer.style.display = 'block';
        
        // URL에서 코드 파라미터 제거
        const url = new URL(window.location);
        url.searchParams.delete('code');
        window.history.replaceState({}, '', url);
      });
      
      // URL 파라미터 확인
      function checkUrlParam() {
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        
        if (code && code.length === 4) {
          const validFirstChars = ['D', 'B', 'O'];
          const validSecondChars = ['R', 'S'];
          const validThirdChars = ['C', 'T'];
          const validFourthChars = ['M', 'T'];
          
          if (
            validFirstChars.includes(code[0]) &&
            validSecondChars.includes(code[1]) &&
            validThirdChars.includes(code[2]) &&
            validFourthChars.includes(code[3])
          ) {
            showResult(code);
          }
        }
      }
      
      // 페이지 로드 시 URL 파라미터 확인
      checkUrlParam();
    });
  </script>
</body>
</html>